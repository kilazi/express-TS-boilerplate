{"version":3,"sources":["webpack:///webpack/bootstrap 563b703ff670090a3071","webpack:///./server/server.ts","webpack:///external \"rxjs\"","webpack:///external \"md5\"","webpack:///./server/api/api.service.ts","webpack:///./server/api/auth.api.ts","webpack:///./server/api/devices.api.ts","webpack:///./server/api/request.handler.ts","webpack:///./server/api/user.api.ts","webpack:///./server/bootstrap.ts","webpack:///./server/common/crud.service.ts","webpack:///./server/common/global.service.ts","webpack:///./server/common/jwt.service.ts","webpack:///./server/db/db.client.ts","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"express\"","webpack:///external \"express-jwt\"","webpack:///external \"http\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"mongodb\"","webpack:///external \"path\"","webpack:///external \"uuid\""],"names":[],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/var/www/BT\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 563b703ff670090a3071","import { Server } from './bootstrap';\nimport {GlobalService} from './common/global.service';\n\nvar $server = new Server(new GlobalService());\n// $server.bootstrap();\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/server.ts","module.exports = require(\"rxjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"md5\"\n// module id = 2\n// module chunks = 0","import { UserAPI } from './user.api';\nimport { DevicesAPI } from './devices.api';\nimport { CRUDService } from './../common/crud.service';\nimport { APIResponse } from './api.service';\nimport { Observable } from 'rxjs';\nimport { RequestHandler } from './request.handler';\nimport { AuthAPI } from './auth.api';\nimport { JWTService } from './../common/jwt.service';\nimport { DBClient } from './../db/db.client';\nimport { GlobalService } from '../common/global.service';\nimport * as path from 'path';\nimport * as express from 'express';\nimport * as bodyParser from 'body-parser';\nimport { Settings } from '../../app/common/config';\n\nexport interface APIResponse {\n    status: boolean,\n    data?: any,\n    error?: string\n}\n\ninterface apiEndpoint {\n    address: string,\n    type: 'post' | 'get' | 'put' | 'delete',\n    class: any,\n    method: string\n}\n\nexport class APIHandler {\n    private requestHandler: RequestHandler;\n    private apiEndpoints: [apiEndpoint];\n    private auth: AuthAPI;\n    private devices: DevicesAPI;\n    private user: UserAPI;\n    constructor(\n        private globalService: GlobalService,\n        private db: DBClient,\n        private JWT: JWTService,\n        private CRUD: CRUDService\n    ) {\n        this.auth = new AuthAPI(JWT, CRUD);\n        this.devices = new DevicesAPI(JWT, CRUD);\n        this.user = new UserAPI(JWT, CRUD);\n        this.requestHandler = new RequestHandler();\n        this.apiEndpoints = [\n            {\n                address: '/v1/auth/login',\n                type: 'post',\n                class: this.auth,\n                method: 'login'\n            },\n            {\n                address: '/v1/auth/register',\n                type: 'post',\n                class: this.auth,\n                method: 'register'\n            },\n            {\n                address: '/v1/auth/login-social',\n                type: 'post',\n                class: this.auth,\n                method: 'loginSocial'\n            },\n            {\n                address: '/v1/devices/list',\n                type: 'get',\n                class: this.devices,\n                method: 'getDevicesList'\n            },\n            {\n                address: '/v1/devices/meta',\n                type: 'get',\n                class: this.devices,\n                method: 'getDevicesMeta'\n            },\n            {\n                address: '/v1/devices/add',\n                type: 'post',\n                class: this.devices,\n                method: 'addDevice'\n            },\n            {\n                address: '/v1/devices/update-meta',\n                type: 'put',\n                class: this.devices,\n                method: 'updateDeviceMeta'\n            },\n            {\n                address: '/v1/devices/update',\n                type: 'put',\n                class: this.devices,\n                method: 'updateDevice'\n            },\n            {\n                address: '/v1/devices/share',\n                type: 'post',\n                class: this.devices,\n                method: 'shareDevice'\n            },\n            {\n                address: '/v1/devices/remove',\n                type: 'post',\n                class: this.devices,\n                method: 'removeDevice'\n            },\n            {\n                address: '/v1/user/get',\n                type: 'get',\n                class: this.user,\n                method: 'getUser'\n            },\n            {\n                address: '/v1/user/update-family',\n                type: 'put',\n                class: this.user,\n                method: 'updateFamily'\n            },\n            {\n                address: '/v1/user/update',\n                type: 'put',\n                class: this.user,\n                method: 'updateUser'\n            }\n        ]\n    }\n    routes() {\n        // let route = '/auth/login';\n        this.apiEndpoints.forEach(endpoint => {\n            this.initRoute(endpoint);\n        })\n\n\n        this.globalService.app.get('**', (req, res, next) => {\n\n        });\n    }\n\n    initRoute(endpoint: apiEndpoint) {\n        this.globalService.app[endpoint.type](endpoint.address, (req, res, next) => {\n            console.log(endpoint.address + ' ' + endpoint.type.toUpperCase() + ' Request: ', req.body);\n            this.requestHandler.handle(req).subscribe(handledReq => {\n                // console.log('handleReq', handledReq);\n                let user = req.user;\n                if (user && user['user_id'])\n                    endpoint.class[endpoint.method](handledReq, user['user_id']).subscribe((resAPI: APIResponse) => {\n                        console.log(endpoint.address + ' ' + endpoint.type.toUpperCase() + ' Response 1: ', resAPI);\n                        res.json(resAPI);\n                    }, err => this.returnError(res, err, endpoint.address, endpoint.type))\n                else \n                    endpoint.class[endpoint.method](handledReq).subscribe((resAPI: APIResponse) => {\n                        console.log(endpoint.address + ' ' + endpoint.type.toUpperCase() + ' Response 2: ', resAPI);\n                        res.json(resAPI);\n                    }, err => this.returnError(res, err, endpoint.address, endpoint.type, 401))\n            }, err => this.returnError(res, err));\n        })\n    }\n\n    returnError(res, message: string, address: string = 'Undefined', type: string = 'Undefined', status: number = 400) {\n        console.log(address + ' ' + type.toUpperCase() + ' Error: ', message);\n        let error: APIResponse = {\n            status: false,\n            error: message\n        }\n        res.status(status).json(error);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/api/api.service.ts","import { CRUDService } from './../common/crud.service';\nimport { APIResponse } from './api.service';\nimport { Observable } from 'rxjs';\nimport { JWTService } from './../common/jwt.service';\nvar md5 = require('md5');\nexport class AuthAPI {\n\n    private socialSecret: string = 'e4901652-9ef1-4e79-abd1-cde058ba51bf';\n\n    constructor(\n        private JWT: JWTService,\n        private CRUD: CRUDService\n    ) {\n\n    }\n\n    login(data) { \n        let response: APIResponse;\n        return new Observable(observer => {\n            data.password = md5(data.password);\n            this.CRUD.read('users', data).subscribe((res: any) => {\n                if (res.length == 1) {\n                    response = {\n                        status: true,\n                        data: this.JWT.createToken({ user_id: res[0]['id'] })\n                    }\n                    observer.next(response);\n                } else {\n                    observer.error('WRONG_LOGIN')\n                }\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    register(data) {\n        let response: APIResponse;\n        return new Observable(observer => {\n            data.password = md5(data.password);\n            this.CRUD.read('users', { email: data.email }).subscribe((res: any) => {\n                if (!res.length) {\n                    this.CRUD.createOne('users', data).subscribe((res: any) => {\n                        response = {\n                            status: true,\n                            data: this.JWT.createToken({ user_id: res })\n                        }\n                        observer.next(response);\n                    }, err => {\n                        observer.error(err);\n                    })\n\n                } else {\n                    observer.error('EMAIL_ALREADY_EXISTS')\n                }\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    loginSocial(data) {\n        let response: APIResponse;\n        console.log('loginSocial', data);\n        let filter = {};\n        filter[data['type']] = data['data'];\n        return new Observable(observer => {\n            if (data['secret'] != this.socialSecret) observer.error('SOURCE_ERROR');\n            this.CRUD.read('users', filter).subscribe((res: any) => {\n                if (res.length == 1) {\n                    response = {\n                        status: true,\n                        data: this.JWT.createToken({ user_id: data['id'] })\n                    }\n                    observer.next(response);\n                } else if (res.length == 0) {\n                    this.CRUD.createOne('users', data).subscribe((res: any) => {\n                        response = {\n                            status: true,\n                            data: this.JWT.createToken({ user_id: res })\n                        }\n                        observer.next(response);\n                    }, err => {\n                        observer.error(err);\n                    })\n                } else observer.error('UNKNOWN_ERROR');\n            }, err => observer.error(err))\n        })\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/api/auth.api.ts","import { CRUDService } from './../common/crud.service';\nimport { APIResponse } from './api.service';\nimport { Observable } from 'rxjs';\nimport { JWTService } from './../common/jwt.service';\nvar md5 = require('md5');\nexport class DevicesAPI {\n\n    constructor(\n        private JWT: JWTService,\n        private CRUD: CRUDService\n    ) {\n\n    }\n\n    getDevicesList(data, user_id) {\n        return new Observable(observer => {\n            this.CRUD.read('devices', { user_id: user_id }).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    getDevicesMETA(data, user_id) {\n        return new Observable(observer => {\n            this.CRUD.read('devices_meta', { user_id: user_id }).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    addDevice(data, user_id) {\n        data['user_id'] = user_id;\n        let device_id = data['device_id'];\n        return new Observable(observer => {\n            this.CRUD.read('devices', { id: device_id }).subscribe((devices: any) => {\n                console.log('Found devices', devices);\n                if (devices.length > 0) {\n                    observer.error('LOCKED_DEVICE');\n                } else this.CRUD.createOne('devices', data).subscribe(devices => {\n                    observer.next(devices);\n                }, err => {\n                    observer.error(err);\n                });\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    updateDeviceMeta(data, user_id) {\n        let device_id = data['device_id'];\n        return new Observable(observer => {\n            this.CRUD.update('devices_meta', { device_id: device_id }, data).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n        })\n    }\n\n    updateDevice(data, user_id) {\n        let device_id = data['device_id'];\n        return new Observable(observer => {\n            this.CRUD.update('devices', { device_id: device_id }, data).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n        })\n    }\n\n    shareDevice(data, user_id) {\n        let device_id = data['device_id'];\n        let share_to = data['share_to'];\n        return new Observable(observer => {\n            this.CRUD.read('devices', { device_id: device_id }).subscribe((devices: any) => {\n                if (devices.length == 0) {\n                    let shared = devices[0]['shared'];\n                    shared.push(share_to);\n                    this.CRUD.update('devices', { device_id: device_id }, shared).subscribe(devices => {\n                        observer.next(devices);\n                    }, err => {\n                        observer.error(err);\n                    });\n                } else observer.error('DEVICE_NOT_FOUND');\n            }, err => {\n                observer.error(err);\n            })\n        })\n    }\n    \n    removeDevice(data, user_id) {\n        let device_id = data['device_id'];\n        return new Observable(observer => {\n            this.CRUD.delete('devices', {device_id: device_id}).subscribe(\n                res => observer.next(),\n                err => observer.error()\n            )\n        })\n    }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/api/devices.api.ts","import { Observable } from 'rxjs';\nexport class RequestHandler {\n    constructor() {}\n    handle(req) {\n        return new Observable(observer => {\n            let hasQuery: boolean = false;\n            if (Object.keys(req.query).length) hasQuery = true;\n            // console.log('Object.keys(req.query)', Object.keys(req.query), req.query, hasQuery);\n            let hasBody: boolean = false;\n            if (Object.keys(req.body).length) hasBody = true;\n            // console.log('Object.keys(req.body)', Object.keys(req.body), req.body, hasBody); \n\n            if (hasBody && !hasQuery)\n                observer.next(req.body);\n            else if (hasQuery && !hasBody)\n                observer.next(req.query);\n            else if (hasQuery && hasBody)\n                observer.next(Object.assign(req.query, req.body));\n            else {\n                observer.next({});\n            }\n        })\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/api/request.handler.ts","import { CRUDService } from './../common/crud.service';\nimport { APIResponse } from './api.service';\nimport { Observable } from 'rxjs';\nimport { JWTService } from './../common/jwt.service';\nvar md5 = require('md5');\nexport class UserAPI {\n\n    constructor(\n        private JWT: JWTService,\n        private CRUD: CRUDService\n    ) {\n\n    }\n\n    getUser(data, user_id) {\n        return new Observable(observer => {\n            this.CRUD.read('users', { user_id: user_id }).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n\n        })\n    }\n\n    updateFamily(data, user_id) {\n        let device_id = data['device_id'];\n        let share_to = data['share_to'];\n        return new Observable(observer => {\n            this.CRUD.update('devices', { user_id: user_id }, { family: data }).subscribe((devices: any) => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n        })\n    }\n\n    updateUser(data, user_id) {\n        return new Observable(observer => {\n            this.CRUD.update('users', { user_id: user_id }, data).subscribe(devices => {\n                observer.next(devices);\n            }, err => {\n                observer.error(err);\n            })\n        })\n    }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/api/user.api.ts","import { JWTService } from './common/jwt.service';\nimport { CRUDService } from './common/crud.service';\nimport * as path from 'path';\nimport * as express from 'express';\nimport * as bodyParser from 'body-parser';\nimport * as cookieParser from 'cookie-parser';\nimport { GlobalService } from './common/global.service';\nimport { APIHandler } from './api/api.service';\nimport * as http from 'http';\nimport { DBClient } from './db/db.client';\n\nexport class Server {\n    private app: any;\n    private API: APIHandler;\n    private CRUD: CRUDService;\n    private JWT: JWTService\n    private $http;\n    private dbClient: DBClient;\n    constructor( \n        private globalService: GlobalService\n    ) {\n        this.dbClient = new DBClient(this.globalService);\n        this.dbClient.connect().subscribe(() => {\n            this.CRUD = new CRUDService(this.globalService, this.dbClient);\n            this.JWT = new JWTService();\n            this.API = new APIHandler(this.globalService, this.dbClient, this.JWT, this.CRUD);\n            this.bootstrap();\n        });\n\n\n    }\n    bootstrap() { \n        this.app = express();\n        this.$http = http['Server'](this.app);\n        this.app.use(bodyParser.json());\n        this.app.use(cookieParser());\n        this.app.use(express.static(path.join(__dirname, '../public')));\n        this.globalService.app = this.app;\n        this.JWT.init(this.app);\n        this.API.routes();\n\n\n\n        this.$http.listen(1337, () => {\n            console.log('Server runs at 1337.');\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/bootstrap.ts","import { DBClient } from './../db/db.client';\nimport { GlobalService } from './../../app/common/global.service';\nimport { Observable } from 'rxjs';\nimport * as EventEmitter from 'events';\nimport * as uuid from 'uuid';\n\nexport class CRUDService {\n    constructor(\n        private gs: GlobalService,\n        private dbClient: DBClient\n    ) {\n    }\n\n    read(collectionName: string, filter: Object = {}) {\n        var collection = this.dbClient.db.collection(collectionName);\n        return new Observable(observer => {\n            collection.find(filter).toArray((err, docs) => {\n                if (err) observer.err('DATABASE_ERROR');\n                observer.next(docs);\n            });\n        })\n    }\n\n    create(collectionName: string, data: [Object]) {\n        return new Observable(observer => {\n            new Promise((resolve, reject) => {\n                let length = data.length - 1;\n                data.forEach((item, index) => {\n                    if(!item['id'])\n                        item['id'] = uuid.v4();\n                    if (index === length) {\n                        resolve(data);\n                    }\n                })\n            }).then((data) => {\n                var collection = this.dbClient.db.collection(collectionName);\n\n                collection.insertMany(data, (err, docs) => {\n                    if (err) observer.err('DATABASE_ERROR');\n                    observer.next(docs);\n                });\n            })\n        });\n    }\n\n    createOne(collectionName: string, data: [Object]) {\n        return new Observable(observer => {\n            if(!data['id'])\n                data['id'] = uuid.v4();\n\n            var collection = this.dbClient.db.collection(collectionName);\n\n            collection.insertOne(data, (err, docs) => {\n                if (err) observer.err('DATABASE_ERROR');\n                observer.next({id: data['id']});\n            });\n        })\n\n    }\n\n    update(collectionName: string, search: Object, set: Object) {\n        var collection = this.dbClient.db.collection(collectionName);\n        return new Observable(observer => {\n            collection.updateMany(search, { $set: set }, (err, docs) => {\n                if (err) observer.err('DATABASE_ERROR');\n                observer.next(docs);\n            });\n        });\n    }\n\n    delete(collectionName: string, search: Object) {\n        var collection = this.dbClient.db.collection(collectionName);\n        return new Observable(observer => {\n            collection.deleteMany(search, (err, docs) => {\n                if (err) observer.err('DATABASE_ERROR');\n                observer.next(docs);\n            });\n        });\n    }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/common/crud.service.ts","import * as EventEmitter from 'events';\nexport class GlobalService {\n    public app: any;\n    public static_folder: any;\n    public DBClient: any;\n    constructor() {\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/common/global.service.ts","import { APIResponse } from './../api/api.service';\nimport * as EventEmitter from 'events';\nvar expressJwt = require('express-jwt');\nimport * as uuid from 'uuid';\nimport * as jwt from 'jsonwebtoken';\n// export const secret: string = uuid.v4();\n//temp for dev\nexport const secret:string = '0f952eb0-5da5-45ad-8971-a9b15f9db6db';\nconst UNAUTHORIZED_PATHS: Array<string> = [\n    '/favicon.ico',\n    '/v1/auth/login',\n    '/v1/auth/register',\n    '/v1/auth/login-social',\n    '/v1/auth/forgot-password'\n]\nexport class JWTService {\n    public app: any;\n    constructor() {\n\n    }\n\n    init(app) {\n        console.log('JwT initiated with secret: ' + secret);\n        app.use(expressJwt({ secret: secret }).unless({ path: UNAUTHORIZED_PATHS }));\n        this.handleError(app);        \n    }\n\n    handleError(app) {\n        app.use(function (err, req, res, next) {\n            if (err.name === 'UnauthorizedError') {\n                let response: APIResponse = {\n                    status: false,\n                    error: 'UNAUTHORIZED'\n                }\n                res.status(401).send(response);\n            }\n        });\n    }\n\n    createToken(data) {\n        let token = jwt.sign(data, secret);\n        return token;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/common/jwt.service.ts","import { GlobalService } from './../common/global.service';\nimport { Observable } from 'rxjs';\nvar MongoClient = require('mongodb').MongoClient\nconst url = 'mongodb://localhost:27017/bt';\n\nexport class DBClient {\n    public db: any;\n    constructor(\n        private globalService: GlobalService\n    ) {\n        this.db = this.globalService.DBClient;\n    }\n\n    connect() {\n        console.log('Connecting to db..');\n        return new Observable(observer => {\n            MongoClient.connect(url, (err, db) => {\n                if (!err) {\n                    this.db = db;\n                    console.log(\"Connected successfully to MongoDB server.\");\n                    observer.next();\n                }\n                else {\n                    console.log(\"Error connecting to server: \", err);\n                    observer.error();\n                }\n            });\n        })\n\n    }\n\n    disconnect() {\n        this.db.close();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./server/db/db.client.ts","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"express-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-jwt\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid\"\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}